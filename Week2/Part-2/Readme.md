

# <img width="60" height="60" alt="image" src="https://github.com/user-attachments/assets/0fc94fea-b4ab-4ed1-aca0-eebd6ccb00f7" /> BabySoC Fundamentals & Functional Modelling 

# Part-2 ‚Äì  Labs (Hands-on Functional Modelling) 


# Contents of the day

1. [Lab Objective and Learning Outcomes](#1-lab-objective-and-learning-outcomes)

2. [Tools and Software Requirements](#2-tools-and-software-requirements)

3. [Overview of BabySoC Architecture and Modules](#3-overview-of-babysoc-architecture-and-modules)

4. [Step-by-Step Procedure](#4-step-by-step-procedure)

5. [Simulation and Waveform Analysis](#5-simulation-and-waveform-analysis)

6. [Summary](#6-summary)


## 1. Lab Objective and Learning Outcomes

The goal of this lab is to explore the functional modelling of the BabySoC (System-on-Chip) design using simulation tools.

By the end of the lab, you will be able to:

- Compile and simulate Verilog RTL code.

- Visualize SoC behavior using GTKWave.

- Understand reset and clock mechanisms in a digital system.

- Analyze the flow of data between CPU, memory, and peripheral modules.

- Document observations and verify correct functionality of the BabySoC.



## 2. Tools and Software Requirements

To complete this lab, the following tools are required:

**Icarus Verilog (iverilog)**: Open-source Verilog compiler used for compiling and simulating Verilog design files.

**GTKWave**: A waveform viewer used to analyze .vcd (Value Change Dump) files generated during simulation.

**Git**: For cloning and accessing the BabySoC project repository.

**Linux/Ubuntu terminal**: Recommended environment for running commands.


## 3. Overview of BabySoC Architecture and Modules

The VSDBabySoC is a minimal System-on-Chip (SoC) designed for learning. It contains three modules namely RVMYTH(RISC-V Core), PLL Module and DAC Module.

### Module Descriptions

**3.1 vsdbabysoc.v** (Top-Level SoC Module)

  This is the top-level module that integrates the rvmyth, pll, and dac modules.
 
   [VSDBabySoC](https://github.com/manili/VSDBabySoC.git)
      
   **Input and Output signals**
   
      - Inputs:
         - reset: Resets the core processor.
         - VCO_IN, ENb_CP, ENb_VCO, REF: PLL control signals.
         - VREFH: DAC reference voltage.
      - Outputs:
         - OUT: Analog output from DAC.
         - Connections:
         - RV_TO_DAC - A 10-bit bus that connects the RISC-V core output to the DAC input.
         - CLK - The clock signal generated by the PLL.

**3.2 rvmyth.v** (RISC-V Core)
  
   The rvmyth module is a simple RISC-V based processor. It outputs a 10-bit digital signal (OUT) to be converted by the DAC.
   [rvmyth](https://github.com/kunalg123/rvmyth/)
  
   **Role of RISC-V CORE:**
      
      - Control signal generation
      
      -	PLL control (e.g., VCO_IN, REF)
      
      -	Monitoring DAC output
      
      -	Possibly running a FSM (Finite State Machine) <br>
      
   
   **Input and Output signals**
      
      Inputs:
         - CLK: Clock signal generated by the PLL.
         - reset: Initializes or resets the processor.
      Outputs:
         - OUT: A 10-bit digital signal representing processed data to be sent to the DAC.


**3.3 avsdpll.v** (PLL Module)
  
   The pll module is a phase-locked loop that generates a stable clock (CLK) for the RISC-V core.
   
  [Introduction](https://github.com/ireneann713/PLL.git)
  [avsdpll](https://github.com/lakshmi-sathi/avsdpll_1v8.git)
  
   **How a Phase-Locked Loop implemented?:**

    -	Takes a reference clock (REF) and a feedback signal (possibly from DAC)

    -	Uses a Charge Pump (CP) and Voltage Controlled Oscillator (VCO)

    -	Generates a control signal (RV_TO_DAC) that is sent to the DAC.

   **Key signals:**
  
    -	REF ‚Äì reference input clock
    
    -	VCO_IN ‚Äì control signal to VCO
    
    -	RV_TO_DAC[9:0] ‚Äì digital output sent to DAC
    
    -	ENb_CP, ENb_VCO ‚Äì enables for CP/VCO

    
   **Input and Output signals**
  
      Inputs:
         - VCO_IN, ENb_CP, ENb_VCO, REF: Control and reference signals for PLL operation.
      Output:
         - CLK: A stable clock signal for synchronizing the core and other modules.
         
**3.4 avsddac.v** (DAC Module)
  
   The dac module converts the 10-bit digital signal from the rvmyth core to an analog output. <br>[avsddac](https://github.com/vsdip/rvmyth_avsddac_interface.git)
  
   **How digital input to analog converted?:**
   
    - Receives RV_TO_DAC[9:0] from PLL

    - Outputs real-valued voltage: OUT

    - Uses voltage references: VREFH, VREF

   **Key signals:**
  
    - RV_TO_DAC[9:0] ‚Äì 10-bit digital input
    
    - OUT ‚Äì real-valued analog output
    
    - VREFH / VREFL ‚Äì DAC reference voltages

   **Input and Output signals**

      Inputs:
         - D: A 10-bit digital input from the processor.
         - VREFH: Reference voltage for the DAC.
      Output:
         - OUT: Analog output signal.


## 4. Step-by-Step Procedure

1. **Clone the BabySoC Project Repository**

   ```
   git clone https://github.com/manili/VSDBabySoC.git)

   cd VSDBabySoc
   
   ```
2. **Compile Verilog Design and Testbench**

   ```
   iverilog -I src/include -I src/module src/module/testbench.v

   ```
    **Here**

    - In Icarus Verilog (iverilog), the `-I` option is used to specify include directories where the compiler should look for Verilog header files (`.vh` or `.v`).
  
    - By default, the compiler only searches the current directory for included files.If your include files are in different folders (like src/include or src/module), then you must tell iverilog where to search for them. That‚Äôs what `-I` does.
   
3. **Run Simulation and Generate Waveform File**

    ```

    ./a.out

    ```

4. **View Waveforms in GTKWave**

    ```
    gtkwave dump.vcd

    ```

## 5. Simulation and Waveform Analysis

<div align="center"> <img width="500" height="500" alt="vsdbabysoctb1" src="https://github.com/user-attachments/assets/26e8da96-dd2b-497a-9435-25c623691197" /> </div>


  ### Waveform Analysis

   - Only 4 signals visible in beside waves window:

        -	CLK = 1

        -	reset = 0 (inactive)

        -	RV_TO_DAC[9:0] = increasing values (e.g., 0x35D, 0x276, etc.)

        -	OUT = changing real value


  **1. Signal Behaviour in waveform:**

   **RV_TO_DAC[9:0]**
  
      ‚Ä¢	Driving input to DAC
  
      ‚Ä¢	Generated by PLL

      ‚Ä¢	Changes with time ‚Üí PLL active

   **OUT**

      ‚Ä¢	Real output of DAC
    


  üîç**2. Observations:**

      - DAC is actively converting digital values (RV_TO_DAC) to real voltage (OUT).
  
      - OUT = 0.841642... at one point, which matches the input RV_TO_DAC/1024 * (VREFH - VREFL) + VREFL
    



  üìå **3. Conclusion of Waveform Analysis:**


     -	The DAC converts digital control signals (RV_TO_DAC[9:0]) into analog (OUT) ‚Äî real number.

     -	The PLL likely generates these control signals based on phase difference between REF and internal clock.

     -	The core handles signal generation and control logic.


# 6. Summary

   -  In this lab, we explored the functional behaviour of the VSDBabySoC through simulation and waveform analysis.
   
   -  Using Icarus Verilog and GTKWave, we compiled the RTL design, executed testbenches, and visualized key operations such as reset, clocking, and dataflow between modules.

  







 


